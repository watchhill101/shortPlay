# ä»£ç è§„èŒƒå·¥å…·ä¼˜åŒ–æŠ¥å‘Š

## ğŸ“‹ ä¼˜åŒ–æ¦‚è§ˆ

æœ¬æ¬¡ä¼˜åŒ–é’ˆå¯¹ShortPlay monorepoé¡¹ç›®çš„ä»£ç è§„èŒƒå·¥å…·è¿›è¡Œäº†å…¨é¢æ”¹è¿›ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

### âœ… å·²å®Œæˆçš„ä¼˜åŒ–

#### 1. ç»Ÿä¸€Prettieré…ç½®

- **é—®é¢˜**: å„å­é¡¹ç›®çš„Prettieré…ç½®ä¸ä¸€è‡´ï¼Œå­˜åœ¨`trailingComma`å’Œ`printWidth`è®¾ç½®å†²çª
- **è§£å†³æ–¹æ¡ˆ**:
  - åœ¨æ ¹ç›®å½•åˆ›å»ºç»Ÿä¸€çš„`.prettierrc`é…ç½®
  - å„å­é¡¹ç›®é€šè¿‡`extends`ç»§æ‰¿æ ¹é…ç½®
  - ç»Ÿä¸€ä½¿ç”¨`trailingComma: "es5"`å’Œ`printWidth: 120`
- **æ•ˆæœ**: ç¡®ä¿æ•´ä¸ªé¡¹ç›®ä»£ç æ ¼å¼åŒ–è§„åˆ™ä¸€è‡´

#### 2. ä¼˜åŒ–lint-stagedé…ç½®

- **é—®é¢˜**: æ ¹ç›®å½•å’Œå­é¡¹ç›®éƒ½æœ‰lint-stagedé…ç½®ï¼Œå¯èƒ½å¯¼è‡´é‡å¤æ‰§è¡Œ
- **è§£å†³æ–¹æ¡ˆ**:
  - åˆ é™¤å­é¡¹ç›®ä¸­çš„é‡å¤lint-stagedé…ç½®
  - åœ¨æ ¹ç›®å½•ç»Ÿä¸€ç®¡ç†æ‰€æœ‰lint-stagedè§„åˆ™
  - æ–°å¢TypeScriptæ–‡ä»¶æ”¯æŒå’ŒCSSæ ·å¼æ£€æŸ¥
- **æ•ˆæœ**: é¿å…é‡å¤æ‰§è¡Œï¼Œæé«˜git hooksæ€§èƒ½

#### 3. æ·»åŠ TypeScripté…ç½®

- **æ–°å¢æ–‡ä»¶**:
  - `tsconfig.base.json` - åŸºç¡€TypeScripté…ç½®
  - `shortPlayPC/tsconfig.json` - PCç«¯é¡¹ç›®é…ç½®
  - `shortPlayApp/tsconfig.json` - Appç«¯é¡¹ç›®é…ç½®
  - `shortPlaybackend/tsconfig.json` - åç«¯é¡¹ç›®é…ç½®
- **æ•ˆæœ**: æä¾›ç»Ÿä¸€çš„TypeScriptç¼–è¯‘å’Œç±»å‹æ£€æŸ¥æ ‡å‡†

#### 4. æ”¹è¿›commit messageæ£€æŸ¥

- **å‡çº§**: ä»ç®€å•æ­£åˆ™æ£€æŸ¥å‡çº§åˆ°commitlint
- **æ–°å¢é…ç½®**:
  - å®‰è£…`@commitlint/cli`å’Œ`@commitlint/config-conventional`
  - åˆ›å»º`commitlint.config.mjs`é…ç½®æ–‡ä»¶
  - æ›´æ–°`.husky/commit-msg`ä½¿ç”¨commitlint
- **æ•ˆæœ**: æ›´ä¸¥æ ¼å’Œä¸“ä¸šçš„commit messageè§„èŒƒæ£€æŸ¥

#### 5. æ·»åŠ CSSæ ·å¼è§„èŒƒæ£€æŸ¥

- **æ–°å¢å·¥å…·**: stylelint
- **é…ç½®æ–‡ä»¶**:
  - `.stylelintrc.json` - åŸºç¡€CSSè§„èŒƒ
  - `shortPlayPC/.stylelintrc.json` - PCç«¯Vueé¡¹ç›®ä¸“ç”¨é…ç½®
  - `shortPlayApp/.stylelintrc.json` - Appç«¯uni-appé¡¹ç›®ä¸“ç”¨é…ç½®
- **é›†æˆ**: å°†stylelinté›†æˆåˆ°lint-stagedå’Œnpm scriptsä¸­
- **æ•ˆæœ**: ç¡®ä¿CSS/SCSSä»£ç è´¨é‡å’Œä¸€è‡´æ€§

## ğŸ”§ æ–°å¢çš„npm scripts

### æ ¹ç›®å½•

```json
{
  "stylelint": "npm run stylelint --workspaces",
  "stylelint:fix": "npm run stylelint:fix --workspaces"
}
```

### å­é¡¹ç›®

```json
{
  "stylelint": "stylelint \"**/*.{css,scss,vue}\"",
  "stylelint:fix": "stylelint \"**/*.{css,scss,vue}\" --fix"
}
```

## ğŸ“¦ æ–°å¢çš„ä¾èµ–

### æ ¹ç›®å½•æ–°å¢

```json
{
  "@commitlint/cli": "^18.4.3",
  "@commitlint/config-conventional": "^18.4.3",
  "stylelint": "^16.0.2",
  "stylelint-config-standard": "^36.0.0",
  "stylelint-config-standard-vue": "^1.0.0"
}
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¼€å‘æµç¨‹

1. **å¼€å‘é˜¶æ®µ**: æ­£å¸¸ç¼–å†™ä»£ç 
2. **æäº¤å‰**: git addåï¼Œpre-commit hookä¼šè‡ªåŠ¨æ‰§è¡Œlintå’Œæ ¼å¼åŒ–
3. **æäº¤æ—¶**: commit-msg hookä¼šæ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼
4. **æ‰‹åŠ¨æ£€æŸ¥**: å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ‰‹åŠ¨æ£€æŸ¥
   ```bash
   npm run lint           # æ£€æŸ¥æ‰€æœ‰é¡¹ç›®çš„ä»£ç è§„èŒƒ
   npm run lint:fix       # è‡ªåŠ¨ä¿®å¤ä»£ç è§„èŒƒé—®é¢˜
   npm run format         # æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
   npm run stylelint      # æ£€æŸ¥CSSæ ·å¼è§„èŒƒ
   npm run stylelint:fix  # è‡ªåŠ¨ä¿®å¤CSSæ ·å¼é—®é¢˜
   ```

### Commit Messageæ ¼å¼

```
<type>[optional scope]: <description>

[optional body]

[optional footer]
```

**ç¤ºä¾‹**:

```
feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½
feat(api): æ–°å¢ç”¨æˆ·è®¤è¯æ¥å£
fix: ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é—®é¢˜
docs: æ›´æ–°APIæ–‡æ¡£
```

### æ”¯æŒçš„commitç±»å‹

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `ci`: CI/CDç›¸å…³
- `build`: æ„å»ºç³»ç»Ÿ
- `revert`: å›æ»š

## ğŸ¯ ä¼˜åŒ–æ•ˆæœ

1. **ä»£ç è´¨é‡æå‡**: é€šè¿‡ESLintã€Prettierã€Stylelintä¸‰é‡ä¿éšœ
2. **å¼€å‘æ•ˆç‡æé«˜**: è‡ªåŠ¨åŒ–çš„ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
3. **å›¢é˜Ÿåä½œä¼˜åŒ–**: ç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œæäº¤è§„èŒƒ
4. **ç»´æŠ¤æˆæœ¬é™ä½**: é›†ä¸­åŒ–çš„é…ç½®ç®¡ç†
5. **é”™è¯¯å‡å°‘**: æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å’Œè§„èŒƒæ£€æŸ¥

## ğŸ“ åç»­å»ºè®®

1. **å®šæœŸæ›´æ–°ä¾èµ–**: ä¿æŒå·¥å…·é“¾çš„æœ€æ–°çŠ¶æ€
2. **å›¢é˜ŸåŸ¹è®­**: ç¡®ä¿æ‰€æœ‰å¼€å‘è€…äº†è§£æ–°çš„è§„èŒƒå’Œæµç¨‹
3. **CI/CDé›†æˆ**: è€ƒè™‘åœ¨CIç®¡é“ä¸­æ·»åŠ è¿™äº›æ£€æŸ¥
4. **æ€§èƒ½ç›‘æ§**: å…³æ³¨lint-stagedçš„æ‰§è¡Œæ—¶é—´ï¼Œå¿…è¦æ—¶è¿›è¡Œä¼˜åŒ–
5. **è§„åˆ™è°ƒæ•´**: æ ¹æ®å›¢é˜Ÿéœ€æ±‚é€‚å½“è°ƒæ•´lintè§„åˆ™

---

_æœ¬ä¼˜åŒ–åœ¨ä¿æŒé¡¹ç›®ç°æœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œæ˜¾è‘—æå‡äº†ä»£ç è´¨é‡ç®¡ç†æ°´å¹³ã€‚_
